# 230704 c高级

## 1. linux 的发展

~~~c
贝尔实验室 、麻省理工 -------> multics 计划    失败
 汤姆森.肯    ----> unics 
  ---> 贝尔实验室推广 ----> unix{ sys 5   BSD}

莱纳斯.托瓦斯  ----> 类unix ---> linux 

linux 发行版本:
   ubuntu ----> “人道主义”   
     
 GUN & GPL 
    GUN is not linux 
 GPL 通用协议
  
~~~



## 2. linux 的体系结构

~~~c
应用层  ---------命令、程序、shell 脚本------
									|
									|shell   \   系统调用
  								|/
内核   --------------------------------
   内核功能:
				文件管理
        设备管理
        进程管理
        内存管理
        网络管理
硬件 ------------------------------------
         摄像头、鼠标。。。。
内核:
	内核是Linux系统的最底层，提供了系统的核心功能并允许进程以一种有序
  的方式访问硬件。
  用于控制进程、输入、输出设备、文件系统操作、管理内存;

linux 系统支持多任务、多用户的模式运行；

~~~

## 3.shell 命令

~~~c
shell是一种命令行解释器，
shell --> "贝壳" 对操作系统起到保护的作用;
用户 和 内核的交互:
  用户在命令行提示符下键入命令文本，开始与Shell进行交互。
  接着，Shell将用户的命令或按键转化成内核所能够理解的指令
  控制操作系统做出响应，直到控制相关硬件设备。
  然后，Shell将输出结果通过Shell提交给用户。 

复习常见的shell命令:
ls 、 cd 、 pwd 、whoami
  ls 选项 参数
   选项:
				-a: 查看以点开头的隐藏文件;
				-l:查看文件的详细属性;
        -R: 递归查询
        -i: 查询inode号
eg:
	-rw-rw-r--  1 jiangcx jiangcx  903 Jul 23 22:48 te1.c
    -: 文件的类型
     linux 下的七大文件类型:（linux 一切皆文件）
			- 普通文件: XXX.c XXX.h XXX.txt
      d 目录文件: 相当于windows的文件夹
      b 块设备文件:磁盘(/dev/sda ...)
      c 字符设备文件:摄像头("/dev/video0")、串口(/dev/ttyUSB0)
      p 管道文件:(mkfifo fifo)用于本地进程间的通信；
      l 链接文件:（软链接:相当于windows的快捷方式）
      s 套接字文件: （socket）用于网络间通信；
   rw- rw- r--: 文件的权限 （0664）
      文件的三种权限:
        r --> 读权限  4
        w --> 写权限  2
        x --> 执行权限 1
   文件的权限包含：
          用户的权限
          组的权限
          其他权限
   一个权限可以用八进制表示:
       	一个文件的最高权限: 0777
  1: 硬链接数
  jiangcx:用户名
  jiangcx:组名
  903: 文件的大小
  Jul 23 22:48： 文件最后修改的时间
  te1.c 文件名

 路径:
		相对路径:从当前出发的一条连续不断的路径;
		绝对路径:从根目录出发的一条连续不断的路径;      
~~~

### 3.2 cd

~~~c
cd 目录的路径 去到某个目录下
cd (cd ~) 去到家目录（/home/hqyj）
cd / 去到根目录
cd .. 返回上一级
cd - 返回上一步;
~~~

### 3.3 目录的创建

~~~c
mkdir dirname
mkdir -p demo1/demo2/demo3 递归创建(创建多级目录)

删除:
	rm -r dirname 删除一个目录
  rmdir dirname 删除一个空目录
~~~

### 3.4 文件

~~~c
文件的创建：
  	①touch filename 文件存则更新时间戳，不存在则创建一个空文件;
    ② vi filename 文件存在则打开不存在则创建;
文件的删除：
    rm filename 
文件的查看:
		cat filename 文件的查看
    cat -n filename 查看文件自带行号
vi编辑器：
   三种模式:
		命令行模式:刚打开文件进入的模式；
			在任意模式下按 Esc 切换到命令行模式:
			nyy --> n代表行数 复制多行
      ndd --> 剪切多行
      p  --> 粘贴
      u  --> 撤销
      ctrl + r 反向撤销
      
      gg=G 代码缩进对齐
      
      /str 查找
        n:向下查找
        N:向上查找
      
      1G: 光标去到第一行
      G: 光标去到最后一行     
    插入模式:
			在命令行模式的基础上，按 a / i / o;
		底行模式:
			在命令行模式的基础上，输入 : （shift + :）
        w: 保存
        q: 退出
        wq:保存并退出
        q!: 强制退出
        wq!:强制保存并退出
        
        设置行号: set number
        取消行号: set nonumber
        
        :num 去到第num行
        
        vsp filename 水平分屏
         ctrl + w + w 切换光标到分屏；
          
        替换:
        . ---> 当前
        $ ---> 末尾
        g ---> 每行的所有
        % 全文
        
				范围 s/str1/str2
        
        1，$ s/str1/str2
        //将第一行到最后一行的每行第一个str1替换为str2;
        1，$ s/str1/str2/g
        //将第一行到最后一行的所有str1替换为str2
        
        块复制，块剪切
          范围 y
          范围 d
          eg：
          	. , $ y 复制当前到最后一行
         
          
~~~

### 3.5 文件的复制

~~~c
cp 文件的路径1 文件的路径2
cp 文件的路径1 目录的路径2
   eg:
			cp test.c ../ 将test.c 拷贝到上一级的目录
      cp test.c ../my.c 将test.c 拷贝到上一级并重命名为my.c

cp -a 目录的路径1 目录的路径2
      cp demo1 demo2
~~~

### 3.6 文件移动

~~~c
mv 路径1  路径2
  mv test.c my.c  重命名
~~~

## 3.7 其他常用命令

~~~c
clear 清屏
exit 退出终端
su 切换用户
sudo 临时超级用户权限
diff 
  	diff file1 file2 比较两个文件是否一样
eog 图片查看器
   eog 1.jpg
history 查看历史输入记录
~~~

## 3.8 快捷方式

~~~c
创建终端:
	ctrl + shift + n
终端的切换:
	Alt + Tab 
Tab:
	按一下Tab 补全内容
  按两下: 显示待输入的命令
ctrl + l 清屏
crtl + c 结束
↑:向上查看历史输入记录
↓:向下查看历史输入记录  
~~~

## 4. 软件包的管理

### 4.1 dpkg 离线安装

~~~c
软件包名的构成:
sl   _5.02-1          _amd64     .deb
软件名 版本号  修订版本号   体系架构     后缀
   												i386: 32位
                          amd64(x64): 64位
运行软件: sl (软件名)
 
软件安装:
	sudo dpkg -i 软件包名
卸载：
   sudo dpkg -r 软件名
完全卸载:
	sudo dpkg -P 软件名
查看软件版本号:
	sudo dpkg -l 软件名
查看软件包的安装清单
  sudo dpkg -L 软件名
查看软件安装的状态
  sudo dpkg -s 软件名
~~~

## 4.2 apt 在线安装

~~~c
软件源：
   /etc/apt/sources.list (服务器镜像地址)
 创建服务器的索引（清楚镜像地址上有哪些软件资源）
  sudo apt-get update
  软件包的下载缓存地址：
  	/var/cache/apt/archives
  软件的安装:
		sudo apt-get install 软件名;
  软件的卸载：
			sudo apt-get remove 软件名 
  清空软件包
    	sudo apt-get clean
  检查系统中依赖关系的完整性
    	sudo apt-get check
  将系统中的所有包升级到最新版本  
   		sudo apt-get upgrade 
  重新安装：
    sudo apt-get  --reinstall install 软件名
  完全卸载:
		sudo apt-get --purge remove 软件名
 只下载不安装：
     sudo apt-get -d install 软件名
 获取软件包的安装状态：
     sudo apt-cache policy 软件名

2.配置网络 ---> 桥接模式
      ping www.baidu.com 

~~~

# day2 

## 1.文件互传（windows 和ubuntu）

### 1.1 重装安装vm-tools

~~~c
1.确保有安装包
  	VMwareTools-10.3.22-15902021.tar.gz 
   设置 ---> 重新安装Vmware-tools ,点击就可以找到安装包;
2.解压：
  	sudo tar -xvf VMwareTools-10.3.22-15902021.tar.gz 
   会生成一个目录： vmware-tools-distrib
3.cd vmware-tools-distrib
4.sudo ./vmware-install.pl
   一直回车，如果在安装的过程中出错(.....[No]),就把相应已经存在的
  文件删除(新建终端删除)，接着安装完然后再重复第4步重新安装；
  
重新安装Vm --- tools 是灰色的解决办法:
	1.将虚拟机关机 ---> 找到设置 -->CD/DvD -->选择使用ISO映像
   文件；去Vmware的安装路径下浏览，找到linux.iso选择；
  2.打开虚拟机 ---> CD/DVD 里面就有Vmware的安装包;

~~~

### 1.2 安装共享文件夹

~~~c
1.将虚拟机关机 --> 设置 --> 选项 ---> 共享文件夹 --> 总是启用 
   ----> 添加 --> 主机路径: windows的路径 ---> 
     设置在ubuntu 上此文件夹的名称 --> 应用;
2.打开虚拟机，去到 /mnt/hgfs里面就能找到共享文件夹；
  
 1.可以将文件拷贝到共享文件夹，那么两边系统都能看的；
 2.可以将windows（ubuntu）上的文件直接鼠标复制，
  去到ubuntu(windows)的图形界面 鼠标粘贴;
 3.对于普通文件从windows传到ubuntu，可以拷贝然后到ubuntu的终端，
   右键粘贴文件名，使用命令mv 拷贝；
    eg:
			mv '/tmp/VMwareDnD/6RuSze/非递归先序.png' ./
~~~

## 2.文件相关的命令

## 2.1 文件的压缩

~~~c
在对文件压缩的时候，压缩文件会把源文件覆盖，解压也是一样;
.gz: 压缩率最低，压缩速度最快
   压缩：
      gzip file.txt ---> file.txt.gz
   解压:
      gunzip file.txt.gz ---> file.txt
.bz2: 压缩率次之， 压缩速度次之
	压缩:
		bzip2 file.txt ---> file.txt.bz2
  解压：
    bunzip2 file.txt.bz2 ----> file.txt
.xz: 压缩率最高，压缩速度最慢
  压缩：
    	xz file.txt ---> file.txt.xz
  解压：
      unxz file.txt.xz ---> file.txt
~~~

## 2.3 文件的归档

~~~c
归档： 对批量文件进行打包，归档的对象是目录;
 归档之后源文件依旧在，生成新的归档文件;
 拆包之后，归档的文件依旧在，会重新生成源文件;
归档、压缩：
   tar 选项 归档后的文件名 目录
拆包、解压：
   tar 选项 归档后的文件名 
   选项:
      归档并压缩:
        -c 创建归档(打包)
        -v 显示归档的过程
        -f f后面固定跟随归档后的文件名
        -z 归档并压缩为.gz的文件
        -j 归档并压缩为 .bz2的文件
        -J 归档并压缩为 .xz的文件
        注意:选项中f放在最后，其他选项位置随意;
     拆包并解压:
			 -x 创建归档(打包)
        -v 显示归档的过程
        -f f后面固定跟随归档后的文件名
        -z 拆包并解压.gz的文件
        -j 拆包并解压 .bz2的文件
        -J 拆包并解压 .xz的文件
         
       万能拆包：
         	tar -xvf 归档后的文件名；
~~~

##  2.4 文件查看

~~~c
cat filename 查看文件的内容
cat -n filename 查看的内容会自带行号;

head -num filename 查看文件的前num行;
tail -num filename 查看文件末尾的num行;

more / less 以一种比例的方式查看文件，适合较大的文件查看;

file filename 查看文件类型；
~~~

## 2.5 重定向和追加

~~~c
>:
 重定向
   eg:
			cat /etc/passwd > test.txt 
      注意: test.txt 不存在则会创建，并把/etc/passwd里面的内容
        重定向到test.txt中，如果test.txt存在，那里面的所有内容会
        被替换;
>>: 追加
  eg：
  	cat /etc/passwd >> test.txt 
  	注意: test.txt 不存在则会创建，并把/etc/passwd里面的内容
        追加到test.txt中，如果test.txt存在，也会将内容从文件的
        末尾追加写入;
 eg：
   	将/etc/passwd 里的第45行显示在终端上;
	方法1:
		head -45 /etc/passwd > test.txt
    tail -1 test.txt
  方法2：
      head -45 /etc/passwd | tail -1
| 管道:
	将前面的结果作为后面的输入;

路径：
  	绝对路径：从根目录出发的一条连续不断的路径
    相对路径：从当前出发的一条连续不断的路径
~~~

## 2.6 在文件中搜索字符串

~~~c
grep "string" 文件名 选项
  -n 搜索的结果待行号
  -i 不区分大小写
  -R 递归搜索，给个目录，搜索整个目录下的所有文件
  -w 搜索更加严谨，字符串的前后有其他字符就搜索不到;
选项可以多个一起用；
  	eg:
			grep "str" test.txt -ni
        表示是在test.txt 中搜索 str 这个串，不区分大小写以及
        搜索结果显示行号
      grep "^str" ./ -niR
        表示：在当前目录的所有文件中搜索以str开头的串,不区分大小写
        以及搜索结果显示行号
      grep "str$" test.txt -n 
        表示搜索以str结尾的串，结果显示行号;
      grep "str" test.txt -wni
       表示：搜索 str前后没有其他字符的串，不区分大小写以及搜索结果
         显示行号
     grep "arr\[5\]" ./ -nR
        表示搜索数组 arr[5];

~~~

## 2.7 搜索文件

~~~c
find 搜索路径 -name filename
~~~

## 2.8 字符的提取

~~~c
cut
  eg：
  	cut -d ':' -f 1,5 /etc/passwd
     : 是分隔符
     1,5 提取的位置，第一位置和第5位置;
     /etc/passwd 文件名
eg:
①  提取当前用户的组id 和用户id // 1000:1000
  head -45 /etc/passwd | tail -1 | cut -d ':' -f 3,4

②  在终端上显示当前用户行号 // 45
  	grep "hqyj" /etc/passwd -n | cut -d ':' -f 1

~~~

## 2.9 通配符

~~~c
* 代表所有字符
？ 通配一个字符
[ab] 通配中括号里面的其中一个字符
[^ab] 通配一个字符，除了a或者b的其他字符；
[a-z] 通配这个范围里面的一个字符
例如：
  	test1.c test2.c testa.c testb.c testab.c testc.c
命令：
  	ls *.c 
  输出：
  	test1.c test2.c testa.c testb.c testab.c testc.c
命令：
  	ls test?.c
  输出：
  	test1.c test2.c testa.c testb.c testc.c
命令：
  	ls test[ab].c
  输出：
  		testa.c testb.c
命令：
  	ls test[^ab].c
     输出：
  		test1.c test2.c  testc.c
  
 eg:
	 char buf[32] = {0};
  
    scanf("%[^\n]", buf);
  
    puts(buf);
 输入:
	hello world
 输出：
  hello world

~~~

## 2.10 修改文件的权限

~~~c
一个文件的权限分为：
  用户的权限    u
  组的权限      g
  其他用户的权限 o
  用户的权限、组的权限、其他权限 可以用a来表示
  
  文件的权限：
  	读  r   4
    写  w   2
    可执行 x  1
  
chmod 0777 filename 给一个文件赋最高权限
chmod 0666 filename 
  eg:
	 chmod a+x file.txt 将file.txt的权限所有者都赋可执行权限
   chmod uo-x file.txt 将file.txt 的用户的权限、其他权限去掉
     可执行权限；
   chmod u+rw file.txt 将file.txt 的用户的权限赋读、写的权限

 修改一个文件所在的用户:
	eg：
    	chown root file.txt
    	将fiel.txt 的用户名修改为root 
  修改一个文件所在的组：
   eg:
		chgrp root file.txt
      将file.txt 的组名修改为root
~~~

# day3

## 1.软链接

~~~c
软链接创建：
  	ln -s 源文件 目标文件
 相当于windows的快捷方式;
 一般源文件给绝对路径;
 软链接的文件类型是链接文件;
 当源文件给了绝对路径以后，链接文件可以移动到其他路径下使用;
 源文件给相对路径，链接文件不能移动;
 如果源文件移动了那么，链接文件会失效；
   eg:
		ln -s /home/jiangcx/class/230704/day3/a.out print
                            源文件                链接文件

~~~

## 2.硬链接

~~~c
硬链接的创建: (相当于对文件取别名)
	ln 源文件 目标文件
   硬链接是根据inode创建的文件，硬链接文件和源文件inode号一样;
   当硬链接文件被修改，源文件也会被修改;
   创建硬链接硬链接数会加一;
	 当原文件啊被删除，硬链接数会减一;
   源文件被移动，硬链接数不变， 硬链接正常使用;
~~~

## 3.man 手册

~~~c
man 函数名 （默认查看第一页）
man num 函数名 (查看第num页)

一般第一页查询 命令
   第二页    系统调用函数的接口 (open)
   第三页    库函数
  
man -a 函数名 (q退出当前页，回车进入下一页)
  
~~~

## 4.用户管理

### 4.1 adduser

~~~c
1.创建用户
  sudo adduser 用户名
  
  /etc/skel 存放用户的模板
  /etc/passwd 存放用户信息
  /etc/group 存放用户的信息
  /etc/shadow 存放用户密码的文件

  sudo su 去到root用户下
  su 用户名 去到某个普通用户
  
  关机命令:
	sudo shutdown -r now(时间) 重启
  sudo reboot 重启
  sudo shutdown -h now(时间) 关机
    
  新添加的用户用不了sudo,解决办法:
 (切换到root用户或者本地用户)
		sudo vi /etc/sudoers
      添加一行代码:
	    linux   ALL=(ALL:ALL) ALL
     (新用户名)
修改用户密码：
        sudo passwd 用户名
~~~

### 4.2 usermod

~~~c
	1.
    sudo usermod -aG linux test
    	将test追加到linux 这个组里面
  2.
    sudo usermod -c LINUX linux
    	将linux这个用户在/etc/passwd里的第五个参数修改为LINUX 
    	//修改登录界面名称
  3.sudo usermod -g test linux
    //将linux 这个用户的组改为test；
  4.sudo usermod -d /home/test linux
    //将linux 这个用户的家目录改为/home/test
  5.sudo usermod -l Linux linux
    	//将linux这个用户的用户名改为Linux

~~~

## 4.3 用户的删除及组的删除

~~~c
sudo deluser 用户名 删除用户
sudo deluser  --remove-home 用户名 删除用户及家目录
sudo delgroup 组名 删除组
~~~

# 5. 磁盘相关的命令

~~~c
/dev/sda开头 磁盘相关的文件
/dev/sdb开头  移动硬盘相关的文件
/dev/sr0 光驱 （CD/DVD）
  sudo fdisk -l 查看磁盘
  sudo df -h 查看分区
  
  挂载光驱:
		sudo mount /dev/sr0 ~/myDVD
  取消挂载:
		sudo umount /dev/sr0
   挂载优盘:
			sudo mount /dev/sdb ~/myDVD
   取消挂载
      sudo umount /dev/sdb
      
~~~

# 6 .环境变量

~~~c
env 查看环境变量
 
HOME： 存放家目录
PATH: 保存可执行文件的路径
  如何输入可执行文件名就能运行：
  	①导入临时的环境变量：
  		export PATH=$PATH:./
    ②让环境变量长久有效
        将export PATH=￥PATH:./ 放在家目录下的.bashrc文件中
     让脚本生效:
					source .bashrc
    ③打开/etc/environment 文件
           sudo vi /etc/environment
      PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:
            /usr/bin:/sbin:/bin:/usr/games:/usr/local
              /games:/snap/bin:./"（加上./）
      source /etc/environment


~~~

# 7. 网络相关的命令

~~~c
ifconfig 查询ip地址
ping (ping 两台主机之间是否能通信)
  
 解决ubuntu网络图标消失的问题：
 1.删除文件:    
 sudo rm  /var/lib/NetworkManager/NetworkManager.state 
 2.将文件里的false改为true
  	sudo vi /etc/NetworkManager/NetworkManager.conf 
 3.重启网络服务	
    sudo service network-manager restart 

~~~

# 8.进程相关的命令

~~~c
1.进程:动态的概念，一个程序的执行过程;
 进程号: pid
   
 kill : 向内核发送信号;
  kill -l 查看信号
    eg:
				kill -9 pid 向一个进程发送SIGKILL 的信号 
 ps  -aux  查看进程
 top 动态查看进程的状态
~~~

